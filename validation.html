<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <h1> COMPLEX FORM VALIDATION PREVENTING DEFAULT</h1>

    <form id="formin" method="GET" action="#">
        <div>
            <label for="username">Username:</label>
            <input id="username" onInput="usernamevalidate()">
            <span id="usernameError" class="error"></span>
        </div><br>
        <div>
            <label for="email">Email:</label>
            <input id="email" onInput="emailvalidate()">
            <span id="emailError" class="error"></span>
        </div><br>
        <div>
            <label for="password">Password:</label>
            <input id="password" oninput="  passwordvalidate()">
            <span id="passwordError" class="error"></span>
        </div><br>
        <div>
            <label for="confirmPassword">Confirm Password:</label>
            <input id="confirmPassword" oninput="confirmpassvalidate()">
            <span id="confirmPasswordError" class="error"></span>
        </div><br>
        <button type="submit">Submit</button>
    </form>

    .error {
    color: red;
    }

    <script>

        let taiwo = document.getElementById('registrationForm');
        let myusername = document.getElementById('username');
        let usermessage = document.getElementById('usernameError');
        let myemail = document.getElementById('email');
        let emailmessage = document.getElementById('emailError');
        let mypassword = document.getElementById('password');
        let passmessage = document.getElementById('passwordError');
        let myconfirm = document.getElementById('confirmPassword');
        let confirmmessage = document.getElementById('confirmPasswordError');
        const emailformat = /^\w+@[a-z]+\.[a-z]{2,3}$/;
        const passformat = /^(?=.+[!@#$%^&(),.?":{}|<>])(?=.+\d)(?=.+[a-zA-Z]).{8,16}$/;

        let tobi;

        function usernamevalidate() {
            if (!myusername.value) {
                usermessage.textContent = 'you must enter a username';
                tobi = false;
            } else {
                usermessage.textContent = 'correct input';
                usermessage.style.color = 'blue'
            }
        }


        function emailvalidate() {
            if (!myemail.value) {
                emailmessage.textContent = 'email is required';
                tobi = false;
            } else if (!myemail.value.match(emailformat)) {
                emailmessage.textContent = 'please enter a valid email';
                tobi = false;
            } else {
                emailmessage.textContent = 'valid email';
                emailmessage.style.color = 'blue'
            }
        }

        function passwordvalidate() {
            if (!mypassword.value) {
                passmessage.textContent = 'password is required';
                tobi = false;
            } else if (!mypassword.value.match(passformat)) {
                passmessage.textContent = 'password must at least a lower and uppercase letter, a number and special character and shoudl not be less that 8 digit and not more than 16 digit';
                tobi = false;
            } else {
                passmessage.textContent = 'strong password';
                passmessage.style.color = 'blue'
            }
        }

        function confirmpassvalidate() {
            if (myconfirm.value == '') {
                confirmmessage.textContent = "this field cannot be empty";
                tobi = false;
            } else if (myconfirm.value !== mypassword.value) {
                confirmmessage.textContent = "your password does not match";
                tobi = false;
            } else {
                confirmmessage.textContent = 'password match';
                confirmmessage.style.color = 'blue'
            }
        }

        taiwo.addEventListener('submit', (olu) => {
            olu.preventDefault();
            tobi = true;
            usernamevalidate();
            emailvalidate();
            passwordvalidate();
            confirmpassvalidate();

            if (tobi) {
                taiwo.submit()
            }
        })

    </script>
</body>

</html>